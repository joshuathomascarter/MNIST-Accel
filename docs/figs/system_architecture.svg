<?xml version="1.0" encoding="utf-8"?>
<!-- ACCEL-v1 complete system architecture diagram -->
<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="900" viewBox="0 0 1400 900">
  <!-- Comprehensive CSS Styles -->
  <style>
    /* Host Software Styling */
    .host-box { 
      fill: #e8f4ff; 
      stroke: #1f77b4; 
      stroke-width: 2; 
      rx: 8; 
    }
    
    /* FPGA Hardware Styling */
    .fpga-box { 
      fill: #fff2e8; 
      stroke: #ff7f0e; 
      stroke-width: 2; 
      rx: 8; 
    }
    
    /* Memory Subsystem Styling */
    .memory-box { 
      fill: #f0f8f0; 
      stroke: #2ca02c; 
      stroke-width: 2; 
      rx: 8; 
    }
    
    /* Compute Core Styling */
    .compute-box { 
      fill: #f8f0ff; 
      stroke: #9467bd; 
      stroke-width: 2; 
      rx: 8; 
    }
    
    /* Typography */
    .title { 
      font-family: 'Segoe UI', Arial, sans-serif; 
      font-size: 18px; 
      font-weight: 700; 
      fill: #1f1f1f; 
    }
    .subtitle { 
      font-family: 'Segoe UI', Arial, sans-serif; 
      font-size: 14px; 
      font-weight: 600; 
      fill: #444; 
    }
    .text { 
      font-family: 'Segoe UI', Arial, sans-serif; 
      font-size: 11px; 
      fill: #111; 
    }
    .module-title { 
      font-family: 'Segoe UI', Arial, sans-serif; 
      font-size: 12px; 
      font-weight: 700; 
      fill: #222; 
    }
    
    /* Arrows and Flow Indicators */
    .arrow { 
      stroke: #333; 
      stroke-width: 2; 
      fill: none; 
      marker-end: url(#arrowhead); 
    }
    .data-arrow { 
      stroke: #1f77b4; 
      stroke-width: 3; 
      fill: none; 
      marker-end: url(#bluehead); 
    }
    .ctrl-arrow { 
      stroke: #ff7f0e; 
      stroke-width: 2; 
      fill: none; 
      marker-end: url(#orangehead); 
    }
  </style>

  <!-- Arrow Marker Definitions -->
  <defs>
    <!-- Standard Arrow -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
            refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
    
    <!-- Data Flow Arrow (Blue) -->
    <marker id="bluehead" markerWidth="12" markerHeight="8" 
            refX="12" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#1f77b4"/>
    </marker>
    
    <!-- Control Flow Arrow (Orange) -->
    <marker id="orangehead" markerWidth="12" markerHeight="8" 
            refX="12" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#ff7f0e"/>
    </marker>
  </defs>

  <!-- Main Title and Subtitle -->
  <text x="50" y="40" class="title">ACCEL-v1 System Architecture</text>
  <text x="50" y="65" class="subtitle">Host-FPGA Co-design for INT8 GEMM Acceleration</text>

  <!-- Host Software Stack Section -->
  <g transform="translate(50,100)">
    <rect x="0" y="0" width="400" height="350" class="host-box"/>
    <text x="20" y="25" class="subtitle">Host Software (Python)</text>
    
    <!-- Application Layer -->
    <rect x="20" y="40" width="360" height="60" fill="#fff" stroke="#666" rx="4"/>
    <text x="30" y="60" class="module-title">Application Layer</text>
    <text x="30" y="75" class="text">• Neural Network Training/Inference</text>
    <text x="30" y="90" class="text">• GEMM Operations (M×N×K matrices)</text>
    
    <!-- Host RS Tiler -->
    <rect x="20" y="120" width="360" height="80" fill="#fff" stroke="#666" rx="4"/>
    <text x="30" y="140" class="module-title">HostRSTiler (run_gemm.py)</text>
    <text x="30" y="155" class="text">• Matrix tiling for systolic array</text>
    <text x="30" y="170" class="text">• Row-stationary dataflow management</text>
    <text x="30" y="185" class="text">• Result accumulation and verification</text>
    
    <!-- UART Driver -->
    <rect x="20" y="220" width="360" height="80" fill="#fff" stroke="#666" rx="4"/>
    <text x="30" y="240" class="module-title">UART Driver (uart_driver.py)</text>
    <text x="30" y="255" class="text">• Packet framing (SYNC+LEN+CMD+PAYLOAD+CRC)</text>
    <text x="30" y="270" class="text">• Stream parsing and error detection</text>
    <text x="30" y="285" class="text">• PySerial interface (115200 baud)</text>
    
    <!-- CSR Mapping -->
    <rect x="20" y="320" width="170" height="60" fill="#fff" stroke="#666" rx="4"/>
    <text x="30" y="340" class="module-title">CSR Map</text>
    <text x="30" y="355" class="text">• Register addresses</text>
    <text x="30" y="370" class="text">• Data packing/unpacking</text>
    
    <!-- Golden Models -->
    <rect x="210" y="320" width="170" height="60" fill="#fff" stroke="#666" rx="4"/>
    <text x="220" y="340" class="module-title">Golden Models</text>
    <text x="220" y="355" class="text">• NumPy reference GEMM</text>
    <text x="220" y="370" class="text">• INT8 quantization</text>
  </g>

  <!-- Communication Channel -->
  <g transform="translate(500,250)">
    <path d="M 0 50 L 200 50" class="data-arrow" stroke-width="4"/>
    <path d="M 200 80 L 0 80" class="data-arrow" stroke-width="4"/>
    <text x="100" y="45" class="text" text-anchor="middle">UART TX (Commands, Data)</text>
    <text x="100" y="95" class="text" text-anchor="middle">UART RX (Status, Results)</text>
    <text x="100" y="120" class="text" text-anchor="middle">USB-Serial (115200 bps)</text>
  </g>

  <!-- FPGA Hardware -->
  <g transform="translate(750,100)">
    <rect x="0" y="0" width="600" height="700" class="fpga-box"/>
    <text x="20" y="25" class="subtitle">FPGA Hardware (Cyclone V)</text>
    
    <!-- UART Interface -->
    <rect x="20" y="40" width="250" height="80" fill="#fff" stroke="#666" rx="4"/>
    <text x="30" y="60" class="module-title">UART Interface</text>
    <text x="30" y="75" class="text">• uart_rx.v: Serial to parallel conversion</text>
    <text x="30" y="90" class="text">• uart_tx.v: Parallel to serial conversion</text>
    <text x="30" y="105" class="text">• Packet parsing and command dispatch</text>
    
    <!-- Control Subsystem -->
    <rect x="290" y="40" width="290" height="80" fill="#fff" stroke="#666" rx="4"/>
    <text x="300" y="60" class="module-title">Control Subsystem</text>
    <text x="300" y="75" class="text">• CSR registers (DIMS, TILES, SCALES, STATUS)</text>
    <text x="300" y="90" class="text">• Scheduler for systolic array control</text>
    <text x="300" y="105" class="text">• Interrupt and error handling</text>
    
    <!-- Memory Subsystem -->
    <rect x="20" y="140" width="560" height="120" class="memory-box"/>
    <text x="30" y="165" class="module-title">Memory Subsystem (Double-Buffered)</text>
    
    <!-- Activation Buffer -->
    <rect x="40" y="180" width="160" height="60" fill="#fff" stroke="#666" rx="4"/>
    <text x="50" y="200" class="text" font-weight="600">Activation Buffer</text>
    <text x="50" y="215" class="text">• Bank 0/1 (ping-pong)</text>
    <text x="50" y="230" class="text">• TM×TK INT8 tiles</text>
    
    <!-- Weight Buffer -->
    <rect x="220" y="180" width="160" height="60" fill="#fff" stroke="#666" rx="4"/>
    <text x="230" y="200" class="text" font-weight="600">Weight Buffer</text>
    <text x="230" y="215" class="text">• Bank 0/1 (ping-pong)</text>
    <text x="230" y="230" class="text">• TK×TN INT8 tiles</text>
    
    <!-- Result Buffer -->
    <rect x="400" y="180" width="160" height="60" fill="#fff" stroke="#666" rx="4"/>
    <text x="410" y="200" class="text" font-weight="600">Result Buffer</text>
    <text x="410" y="215" class="text">• Single buffer</text>
    <text x="410" y="230" class="text">• TM×TN INT32 results</text>
    
    <!-- Systolic Array Core -->
    <rect x="20" y="280" width="560" height="200" class="compute-box"/>
    <text x="30" y="305" class="module-title">Systolic Array Core (2×2 PE Grid)</text>
    
    <!-- PE Grid Visualization -->
    <rect x="80" y="330" width="100" height="80" fill="#fff" stroke="#666" rx="4"/>
    <text x="130" y="355" class="text" text-anchor="middle" font-weight="600">PE[0,0]</text>
    <text x="130" y="370" class="text" text-anchor="middle">MAC8</text>
    <text x="130" y="385" class="text" text-anchor="middle">INT32 ACC</text>
    
    <rect x="200" y="330" width="100" height="80" fill="#fff" stroke="#666" rx="4"/>
    <text x="250" y="355" class="text" text-anchor="middle" font-weight="600">PE[0,1]</text>
    <text x="250" y="370" class="text" text-anchor="middle">MAC8</text>
    <text x="250" y="385" class="text" text-anchor="middle">INT32 ACC</text>
    
    <rect x="80" y="430" width="100" height="80" fill="#fff" stroke="#666" rx="4"/>
    <text x="130" y="455" class="text" text-anchor="middle" font-weight="600">PE[1,0]</text>
    <text x="130" y="470" class="text" text-anchor="middle">MAC8</text>
    <text x="130" y="485" class="text" text-anchor="middle">INT32 ACC</text>
    
    <rect x="200" y="430" width="100" height="80" fill="#fff" stroke="#666" rx="4"/>
    <text x="250" y="455" class="text" text-anchor="middle" font-weight="600">PE[1,1]</text>
    <text x="250" y="470" class="text" text-anchor="middle">MAC8</text>
    <text x="250" y="485" class="text" text-anchor="middle">INT32 ACC</text>
    
    <!-- Data flow arrows within systolic array -->
    <path d="M 60 360 L 80 360" class="data-arrow"/>
    <path d="M 180 360 L 200 360" class="data-arrow"/>
    <path d="M 60 460 L 80 460" class="data-arrow"/>
    <path d="M 180 460 L 200 460" class="data-arrow"/>
    <text x="40" y="365" class="text" text-anchor="end">A →</text>
    
    <path d="M 130 310 L 130 330" class="data-arrow"/>
    <path d="M 250 310 L 250 330" class="data-arrow"/>
    <text x="190" y="325" class="text" text-anchor="middle">↓ B</text>
    
    <!-- Array Features -->
    <rect x="340" y="330" width="220" height="150" fill="#fff" stroke="#666" rx="4"/>
    <text x="350" y="350" class="text" font-weight="600">Systolic Array Features:</text>
    <text x="350" y="370" class="text">• Row-stationary dataflow</text>
    <text x="350" y="385" class="text">• INT8×INT8 → INT32 MAC units</text>
    <text x="350" y="400" class="text">• Pipeline depth configurable</text>
    <text x="350" y="415" class="text">• Clock: 100 MHz target</text>
    <text x="350" y="430" class="text">• Throughput: 400 GMAC/s</text>
    <text x="350" y="445" class="text">• Power efficient (vs. CPU/GPU)</text>
    <text x="350" y="460" class="text">• Quantized CNN acceleration</text>
    
    <!-- Performance and Verification -->
    <rect x="20" y="500" width="270" height="80" fill="#fff" stroke="#666" rx="4"/>
    <text x="30" y="520" class="module-title">Performance &amp; Verification</text>
    <text x="30" y="535" class="text">• 26 unit/integration tests (100% pass)</text>
    <text x="30" y="550" class="text">• ModelSim/Verilator simulation</text>
    <text x="30" y="565" class="text">• Mock UART driver for host testing</text>
    
    <rect x="310" y="500" width="270" height="80" fill="#fff" stroke="#666" rx="4"/>
    <text x="320" y="520" class="module-title">Synthesis &amp; Deployment</text>
    <text x="320" y="535" class="text">• Quartus Prime synthesis</text>
    <text x="320" y="550" class="text">• Timing constraints and optimization</text>
    <text x="320" y="565" class="text">• Signal integrity and power analysis</text>
    
    <!-- Clock and Reset -->
    <rect x="20" y="600" width="560" height="60" fill="#fff8dc" stroke="#d6b656" rx="4"/>
    <text x="30" y="620" class="module-title">Clock and Reset Infrastructure</text>
    <text x="30" y="635" class="text">• 100 MHz system clock, synchronous reset</text>
    <text x="30" y="650" class="text">• Clock domain crossing for UART (async reset recovery)</text>
  </g>

  <!-- Data flow connections -->
  <g transform="translate(50,500)">
    <!-- Host to FPGA paths -->
    <path d="M 400 -150 L 700 -150" class="ctrl-arrow"/>
    <text x="550" y="-155" class="text" text-anchor="middle">CSR Commands</text>
    
    <path d="M 400 -100 L 700 -100" class="data-arrow"/>
    <text x="550" y="-105" class="text" text-anchor="middle">Matrix Data</text>
    
    <path d="M 700 -50 L 400 -50" class="data-arrow"/>
    <text x="550" y="-55" class="text" text-anchor="middle">Results &amp; Status</text>
  </g>

  <!-- Legend -->
  <g transform="translate(50,820)">
    <text x="0" y="20" class="subtitle">Legend</text>
    <rect x="0" y="30" width="30" height="15" class="host-box"/>
    <text x="40" y="42" class="text">Host Software</text>
    <rect x="150" y="30" width="30" height="15" class="fpga-box"/>
    <text x="190" y="42" class="text">FPGA Hardware</text>
    <rect x="300" y="30" width="30" height="15" class="memory-box"/>
    <text x="340" y="42" class="text">Memory</text>
    <rect x="420" y="30" width="30" height="15" class="compute-box"/>
    <text x="460" y="42" class="text">Compute</text>
    
    <path d="M 0 60 L 30 60" class="data-arrow"/>
    <text x="40" y="65" class="text">Data Flow</text>
    <path d="M 150 60 L 180 60" class="ctrl-arrow"/>
    <text x="190" y="65" class="text">Control Flow</text>
  </g>
</svg>